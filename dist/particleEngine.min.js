/*! particleEngine 17-12-2014 */
!function(a){"use strict";var b=(a.document||{},function(){function a(a){if("object"!=typeof a)throw new Error(a+"Invalid type");for(var b={dir:"number",speed:"object",alpha:"number",size:"number"},c=0;c<b.length;c++){var d=b[c];if(!a.hasOwnProperty(d))throw new Error("Missing "+d+" from "+a);if(a.hasOwnProperty(d)&&"number"!=typeof a[d])throw new Error("Invalid type for "+d+". Expected 'number', received "+typeof d)}return a}function b(a){for(var b=Array.prototype.slice.call(arguments),c=1;c<b.length;c++)for(var d in b[c])b[c].hasOwnProperty(d)&&(a[d]=b[c][d]);return a}var c={max:100,density:10,gravity:{cur:0,step:.1,max:1.2},origin:{},color:[],particles:[],degradeRate:0,finishFlag:!1},d={emitter:function(){},numParticles:function(){return this.particles.length},addParticle:function(b){try{a(b),b.x=this.origin.x,b.y=this.origin.y,this.particles.push(b)}catch(c){console.log(c)}},getDistance:function(a){var b=a.x-this.origin.x,c=a.y-this.origin.y;return Math.sqrt(b*b+c*c)},move:function(a){a.x+=a.speed.x*Math.cos(a.dir),this.gravity.cur<this.gravity.max&&(this.gravity.cur+=this.gravity.step,a.speed.y+=this.gravity.cur),a.y-=a.speed.y*Math.sin(a.dir)},degrade:function(a,b){var c=this.getDistance(a);a.alpha=1-c/this.degradeRate,(a.alpha<=0||a.size<=0)&&this.particles.splice(b,1)},draw:function(a,b){b.fillStyle="rgba("+this.color+","+a.alpha+")",b.beginPath(),b.arc(a.x,a.y,a.size,0,2*Math.PI,!0),b.closePath(),b.fill()},step:function(a){for(var b=0;b<this.numParticles();b++){var c=this.particles[b];this.move(c),this.degrade(c,b),this.draw(c,a)}}};return{particleSet:function(a){if("undefined"==typeof a.origin)throw new Error("particleSet requires origin parameter");if("undefined"==typeof a.color)throw new Error("particleSet requires color parameter");if("undefined"==typeof a.degradeRate)throw new Error("particleSet requires degradeRate parameter");return a.color=a.color.join(),b(d,c,a)}}});b.VERSION="0.1.0",a.particleEngine=b}(this);