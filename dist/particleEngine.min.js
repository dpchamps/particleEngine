/*! particleEngine 16-12-2014 */
!function(a){"use strict";var b=(a.document||{},function(){function a(a){if("object"!=typeof a)throw new Error(a+"Invalid type");for(var b={dir:"number",speed:"object",alpha:"number",size:"number"},c=0;c<b.length;c++){var d=b[c];if(!a.hasOwnProperty(d))throw new Error("Missing "+d+" from "+a);if(a.hasOwnProperty(d)&&"number"!=typeof a[d])throw new Error("Invalid type for "+d+". Expected 'number', received "+typeof d)}return a}return{particleSet:function(b,c,d,e){if("undefined"==typeof b)throw new Error("particleSet requires origin parameter");if("undefined"==typeof c)throw new Error("particleSet requires color parameter");if("undefined"==typeof d)throw new Error("particleSet requires degradeRate parameter");var f={max:100,density:10,gravity:{cur:0,step:.1,max:1.2}};if(e)for(var g in e)e.hasOwnProperty(g)&&f.hasOwnProperty(g)&&(f[g]=e[g]);return{max:f.max,density:f.density,gravity:f.gravity,origin:b,color:c.join(),particles:[],degradeRate:d,finishFlag:!1,fountain:function(a){a()},numParticles:function(){return this.particles.length},addParticle:function(b){try{a(b),b.x=this.origin.x,b.y=this.origin.y,this.particles.push(b)}catch(c){console.log(c)}},step:function(a){for(var b=0;b<this.numParticles();b++){var c=this.particles[b],d=c.x-this.origin.x,e=c.y-this.origin.y,f=Math.sqrt(d*d+e*e);c.x+=c.speed.x*Math.cos(c.dir),this.gravity.cur<this.gravity.max&&(this.gravity.cur+=this.gravity.step,c.speed.y+=this.gravity.cur),c.y-=c.speed.y*Math.sin(c.dir),c.alpha=1-f/this.degradeRate,c.alpha<=.4&&(c.size=c.size-.01),c.alpha<=0||c.size<=0?this.particles.splice(b,1):(a.fillStyle="rgba("+this.color+","+c.alpha+")",a.beginPath(),a.arc(c.x,c.y,c.size,0,2*Math.PI,!0),a.closePath(),a.fill())}}}}}});b.VERSION="0.1.0",a.particleEngine=b}(this);